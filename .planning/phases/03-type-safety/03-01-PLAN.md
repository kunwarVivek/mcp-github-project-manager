---
phase: 03-type-safety
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/services/PRDGenerationService.ts
  - src/services/ProjectAutomationService.ts
autonomous: true

must_haves:
  truths:
    - "Enum values are used instead of string literals for TaskPriority"
    - "ProjectRepository methods are called without type assertions"
    - "TypeScript compiles without errors after changes"
  artifacts:
    - path: "src/services/PRDGenerationService.ts"
      provides: "Technical requirement generation with proper enum usage"
      contains: "TaskPriority.HIGH"
    - path: "src/services/ProjectAutomationService.ts"
      provides: "Field management without unnecessary casts"
      pattern: "this.projectRepo.updateField"
  key_links:
    - from: "PRDGenerationService.ts"
      to: "TaskPriority enum"
      via: "import and direct usage"
      pattern: "TaskPriority\\.(HIGH|CRITICAL)"
---

<objective>
Fix trivial `as any` assertions: enum string literals and unnecessary interface casts.

Purpose: Quick wins that demonstrate progress and reduce `as any` count by 4 instances with zero risk.
Output: Two production files with proper typing, no `as any` for these patterns.
</objective>

<execution_context>
@/Users/vivek/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vivek/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-type-safety/03-RESEARCH.md

@src/services/PRDGenerationService.ts
@src/services/ProjectAutomationService.ts
@src/domain/ai-types.ts
@src/infrastructure/github/repositories/ProjectRepository.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix enum string literal assertions in PRDGenerationService</name>
  <files>src/services/PRDGenerationService.ts</files>
  <action>
Replace the two `as any` assertions for priority strings with proper enum values:

Line 233: Change `priority: 'high' as any` to `priority: TaskPriority.HIGH`
Line 240: Change `priority: 'critical' as any` to `priority: TaskPriority.CRITICAL`

Ensure `TaskPriority` is imported from `../domain/ai-types.ts` at the top of the file.

These are trivial fixes - the enum values match the string literals exactly, so behavior is unchanged.
  </action>
  <verify>
```bash
# Verify no 'as any' for priority in PRDGenerationService
grep -n "priority:.*as any" src/services/PRDGenerationService.ts && echo "FAIL: as any still present" || echo "PASS: as any removed"

# Verify enum usage
grep -n "TaskPriority\.\(HIGH\|CRITICAL\)" src/services/PRDGenerationService.ts
```
  </verify>
  <done>PRDGenerationService uses TaskPriority enum values instead of string literals with `as any`</done>
</task>

<task type="auto">
  <name>Task 2: Remove unnecessary interface casts in ProjectAutomationService</name>
  <files>src/services/ProjectAutomationService.ts</files>
  <action>
Remove the unnecessary `as any` casts for repository method calls:

Line 170: Change `(this.projectRepo as any).updateField(...)` to `this.projectRepo.updateField(...)`
Line 196: Change `(this.projectRepo as any).deleteField(...)` to `this.projectRepo.deleteField(...)`

These methods exist on ProjectRepository interface. The casts were likely added during development uncertainty and are no longer needed.

Verify the method signatures in ProjectRepository match the call sites before removing casts.
  </action>
  <verify>
```bash
# Verify no 'as any' for projectRepo in ProjectAutomationService
grep -n "projectRepo as any" src/services/ProjectAutomationService.ts && echo "FAIL: as any still present" || echo "PASS: as any removed"

# Verify direct method calls
grep -n "this.projectRepo\.\(updateField\|deleteField\)" src/services/ProjectAutomationService.ts
```
  </verify>
  <done>ProjectAutomationService calls repository methods directly without type assertions</done>
</task>

<task type="auto">
  <name>Task 3: Verify TypeScript compilation and run tests</name>
  <files>src/services/PRDGenerationService.ts, src/services/ProjectAutomationService.ts</files>
  <action>
Run TypeScript compilation to verify no type errors were introduced.
Run the test suite to ensure existing functionality is preserved.

If compilation fails, investigate the type error and fix appropriately - the research indicates these ARE trivial fixes.
  </action>
  <verify>
```bash
cd /Users/vivek/jet/mcp-github-project-manager && npx tsc --noEmit && echo "TypeScript compilation: PASS"
cd /Users/vivek/jet/mcp-github-project-manager && npm test 2>&1 | tail -20
```
  </verify>
  <done>TypeScript compiles without errors, all tests pass</done>
</task>

</tasks>

<verification>
```bash
# Count as any in modified files (should be 0 for these patterns)
echo "=== PRDGenerationService priority as any ==="
grep -c "priority:.*as any" src/services/PRDGenerationService.ts || echo "0"

echo "=== ProjectAutomationService projectRepo as any ==="
grep -c "projectRepo as any" src/services/ProjectAutomationService.ts || echo "0"

echo "=== TypeScript compilation ==="
npx tsc --noEmit && echo "PASS" || echo "FAIL"
```
</verification>

<success_criteria>
1. Zero `priority: ... as any` in PRDGenerationService.ts
2. Zero `projectRepo as any` in ProjectAutomationService.ts
3. TypeScript compiles without errors
4. All tests pass
5. 4 fewer `as any` assertions in production code
</success_criteria>

<output>
After completion, create `.planning/phases/03-type-safety/03-01-SUMMARY.md`
</output>
