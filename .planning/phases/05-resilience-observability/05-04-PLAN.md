---
phase: 05-resilience-observability
plan: 04
type: execute
wave: 4
depends_on: ["05-03"]
files_modified:
  - STATUS.md
  - docs/TOOLS.md
  - docs/API.md
autonomous: true

must_haves:
  truths:
    - "STATUS.md accurately reflects current codebase state"
    - "All 85 MCP tools are documented with examples"
    - "API reference documents key services and types"
  artifacts:
    - path: "STATUS.md"
      provides: "Accurate project status documentation"
      contains: "Phase 5"
    - path: "docs/TOOLS.md"
      provides: "MCP tool reference with examples"
      min_lines: 500
    - path: "docs/API.md"
      provides: "API reference for services"
      min_lines: 200
  key_links:
    - from: "docs/TOOLS.md"
      to: "src/infrastructure/tools/"
      via: "documents tools from ToolRegistry"
      pattern: "health_check|generate_prd"
---

<objective>
Update documentation to reflect current codebase state and document all MCP tools.

Purpose: Documentation debt (DEBT-26, DEBT-27, DEBT-28) must be addressed. Operators and users need accurate STATUS.md, comprehensive tool documentation, and API reference.

Output:
- Updated STATUS.md with Phase 5 state
- docs/TOOLS.md with all 85 tools documented
- docs/API.md with service documentation
</objective>

<execution_context>
@/Users/vivek/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vivek/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-resilience-observability/05-RESEARCH.md
@.planning/phases/05-resilience-observability/05-03-SUMMARY.md

# Source of truth for tools
@src/infrastructure/tools/ToolRegistry.ts
@src/infrastructure/tools/health-tools.ts
@src/infrastructure/health/HealthService.ts
@src/infrastructure/resilience/AIResiliencePolicy.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update STATUS.md to reflect current state</name>
  <files>
    STATUS.md
  </files>
  <action>
1. Read current STATUS.md (if exists) or create new one.

2. Update/Create STATUS.md with sections:
   - Project Overview
   - Architecture Summary (service decomposition, DI container)
   - Current Phase (5 of 12: Resilience and Observability)
   - Completed Phases (1-5 with key deliverables)
   - MCP Compliance (SDK version, tool count, annotations)
   - AI Services (factory pattern, resilience, graceful degradation)
   - Testing (test count, coverage targets)
   - Known Limitations (document any caveats)
   - Next Steps (Phase 6 preview)

Key facts to include:
- MCP SDK 1.25.3
- 85 MCP tools (84 + health_check)
- All tools have behavior annotations and output schemas
- 6 extracted services from Phase 1
- DI container in src/container.ts
- Circuit breaker for AI resilience
- Correlation ID tracing
- Cache persistence option
- 515+ passing tests

3. Keep it concise - STATUS.md is a quick reference, not full documentation.
  </action>
  <verify>
cat STATUS.md shows updated content
grep "Phase 5" STATUS.md confirms current phase
grep "85 tools\|85 MCP" STATUS.md confirms tool count
  </verify>
  <done>
STATUS.md reflects Phase 5 completion.
Key metrics (tools, tests, coverage) are documented.
Architecture summary is accurate.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document all MCP tools with examples</name>
  <files>
    docs/TOOLS.md
  </files>
  <action>
1. Create docs/ directory if it doesn't exist.

2. Create `docs/TOOLS.md` with comprehensive tool documentation:

Structure:
```markdown
# MCP Tools Reference

## Overview
- Total: 85 tools
- Categories: Project, Issue, PR, AI, Automation, Health

## Tool Categories

### Project Management Tools
(List each tool with: name, description, input params, output, example)

### Issue Tools
...

### Pull Request Tools
...

### AI Task Tools
...

### Automation Tools
...

### Health & Observability Tools
...
```

3. For each tool category, document:
   - Tool name
   - Description (from tool definition)
   - Input parameters (from inputSchema)
   - Output format (from outputSchema)
   - Behavior annotation (read-only, destructive, idempotent)
   - Example usage

4. Read tool definitions from:
   - src/infrastructure/tools/ToolRegistry.ts
   - src/infrastructure/tools/health-tools.ts
   - List tools programmatically if possible

5. Include special section for health_check tool (new in Phase 5).

IMPORTANT: Don't fabricate tool details. Read actual tool definitions from source files.
If source is complex, document the pattern and key tools, with note that full list is in ToolRegistry.
  </action>
  <verify>
test -f docs/TOOLS.md
wc -l docs/TOOLS.md shows 500+ lines
grep "health_check" docs/TOOLS.md shows new tool documented
  </verify>
  <done>
docs/TOOLS.md exists with comprehensive tool documentation.
All 85 tools documented with examples.
Categories organized logically.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create API reference documentation</name>
  <files>
    docs/API.md
  </files>
  <action>
1. Create `docs/API.md` with API reference:

Structure:
```markdown
# API Reference

## Services

### AIServiceFactory
- getInstance(): AIServiceFactory
- getModel(type): LanguageModel | null
- isAIAvailable(): boolean
- validateConfiguration(): ConfigStatus
- enableResilience(): void
- executeWithResilience<T>(): Promise<T | DegradedResult>

### ProjectManagementService
- createProject(...)
- getProject(...)
- (list key methods)

### HealthService
- check(): Promise<HealthStatus>

### ResourceCache
- set(type, id, value, options): Promise<void>
- get(type, id): Promise<T | null>
- enablePersistence(): void
- persist(): Promise<void>

## Infrastructure

### CircuitBreakerService
- execute<T>(fn): Promise<T>
- getState(): CircuitState
- isOpen(): boolean

### AIResiliencePolicy
- execute<T>(operation, fallback?): Promise<T | DegradedResult>
- getCircuitState(): CircuitState

### CorrelationContext
- startTrace<T>(operation, fn): Promise<T>
- getCorrelationId(): string | undefined

## Types

### HealthStatus
(document the interface)

### DegradedResult
(document the interface)

## Configuration

### Environment Variables
- GITHUB_TOKEN
- ANTHROPIC_API_KEY
- OPENAI_API_KEY
- GOOGLE_API_KEY
- PERPLEXITY_API_KEY
- AI_MAIN_MODEL
- AI_RESEARCH_MODEL
- AI_FALLBACK_MODEL
- AI_PRD_MODEL
```

2. Document key types and interfaces.

3. Include code examples where helpful.

4. Keep focused on public API - don't document internal implementation details.
  </action>
  <verify>
test -f docs/API.md
wc -l docs/API.md shows 200+ lines
grep "AIServiceFactory\|HealthService\|CircuitBreaker" docs/API.md shows key services documented
  </verify>
  <done>
docs/API.md exists with service documentation.
Key services and types documented.
Configuration documented.
  </done>
</task>

</tasks>

<verification>
All tasks verified by:
1. STATUS.md updated with Phase 5 content
2. docs/TOOLS.md has 500+ lines documenting tools
3. docs/API.md has 200+ lines documenting services
4. All documentation is accurate to current codebase
</verification>

<success_criteria>
- STATUS.md accurately reflects Phase 5 completion
- All 85 MCP tools documented with examples
- Key services have API documentation
- Documentation requirements DEBT-26, DEBT-27, DEBT-28 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/05-resilience-observability/05-04-SUMMARY.md`
</output>
